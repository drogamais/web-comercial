{% extends "base.html" %}

{% block title %}Seleção de Módulo{% endblock %}

{% block styles %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='core/css/index.css') }}">
{% endblock %}

{% block content %}
    <div class="header-title">
        <div class="title-line-1">Drogamais Altaneiro</div>
        <div class="title-line-2">Painel Web Comercial</div>
    </div>

    <div class="container">
        <h1>Escolha o Módulo</h1>
        <p>Selecione qual seção você deseja gerenciar.</p>

        <div class="index-button-container">
            <a href="#" class="index-button button-campanha" data-modal-target="#campanha-modal">
                <span class="button-title">Gerenciar Campanhas</span>
                <span class="button-description">Upload e gestão de produtos de campanhas pontuais.</span>
            </a>

            <a href="#" class="index-button button-tabloide" data-modal-target="#tabloide-modal">
                <span class="button-title">Gerenciar Tabloides</span>
                <span class="button-description">Upload e gestão de produtos para os tabloides vigentes.</span>
            </a>

            <a href="#" class="index-button button-parceiro" data-modal-target="#parceiro-modal">
                <span class="button-title">Gerenciar Parceiros</span>
                <span class="button-description">Cadastro e gestão de parceiros comerciais.</span>
            </a>
        </div>
    </div>
    
    <div id="campanha-modal" class="modal-overlay">
        <div class="modal-content index-modal-content">
            <h2 style="margin-top: 0;">Opções de Campanha</h2>
            <div class="modal-links">
                <a href="{{ url_for('campanha_produtos.upload_page') }}" class="modal-link-button">Upload de Planilha</a>
                <a href="{{ url_for('campanha.gestao_campanhas') }}" class="modal-link-button">Gerenciar Campanhas</a>
            </div>
            <div class="modal-actions" style="margin-top: 25px;">
                <button type="button" class="modal-button-cancel">Fechar</button>
            </div>
        </div>
    </div>

    <div id="tabloide-modal" class="modal-overlay">
        <div class="modal-content index-modal-content">
            <h2 style="margin-top: 0;">Opções de Tabloide</h2>
            <div class="modal-links">
                <a href="{{ url_for('tabloide_produtos.upload_page') }}" class="modal-link-button">Upload de Planilha</a>
                <a href="{{ url_for('tabloide.gestao_tabloides') }}" class="modal-link-button">Gerenciar Tabloides</a>
            </div>
            <div class="modal-actions" style="margin-top: 25px;">
                <button type="button" class="modal-button-cancel">Fechar</button>
            </div>
        </div>
    </div>

    <div id="parceiro-modal" class="modal-overlay">
        <div class="modal-content index-modal-content">
            <h2 style="margin-top: 0;">Opções de Parceiro</h2>
            <div class="modal-links">
                <a href="{{ url_for('parceiro.gestao_parceiros') }}" class="modal-link-button">Gerenciar Parceiros</a>
            </div>
            <div class="modal-actions" style="margin-top: 25px;">
                <button type="button" class="modal-button-cancel">Fechar</button>
            </div>
        </div>
    </div>

    {% if expiring_partners %}
    <div id="expiring-partner-modal" class="modal-overlay">
        <div class="modal-content" style="max-width: 500px; border-top: 5px solid #e74c3c;">
            <h2 style="margin-top: 0; color: #c0392b;">Aviso de Vencimento</h2>
            <p>Os seguintes parceiros irão vencer nos próximos 30 dias:</p>
            
            <ul style="text-align: left; list-style-type: none; padding-left: 0; max-height: 200px; overflow-y: auto; background: #fdfbfb; border: 1px solid #f5c6cb; border-radius: 4px; padding: 10px;">
                {% for partner in expiring_partners %}
                    <li style="padding: 5px 0; border-bottom: 1px solid #eee;">
                        <strong>{{ partner.nome_ajustado }}</strong>
                        <span style="float: right; font-weight: bold; color: #c0392b;">
                            Vence em: {{ partner.data_saida.strftime('%d/%m/%Y') }}
                        </span>
                    </li>
                {% endfor %}
            </ul>
            
            <div class="modal-actions" style="margin-top: 25px; justify-content: space-around;">
                <button type="button" class="modal-button-cancel" style="background-color: #f1f1f1;">Fechar</button>
                <a href="{{ url_for('parceiro.gestao_parceiros', sort_expiring='1') }}" 
                   class="modal-button-confirm" 
                   style="text-decoration: none; width: 150px; padding: 10px 0; display: flex; align-items: center; justify-content: center;">
                    Ver Parceiros
                </a>
            </div>
        </div>
    </div>
    {% endif %}
    {% endblock %}

{% block scripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='core/js/indexPage.js') }}"></script>
{% endblock %}